<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>數學隨機出題系統</title>
<style>
  body {
    font-family: "Noto Serif TC", serif;
    background: #f5f5f5;
    padding: 40px;
  }
  .box {
    max-width: 900px;
    margin: auto;
    background: white;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
  }
  h1 {
    font-size: 32px;
    margin-bottom: 20px;
  }
  select, button, input {
    font-size: 20px;
    padding: 10px;
    margin-top: 10px;
  }
  .question {
    font-size: 24px;
    line-height: 1.8;
    margin-top: 30px;
    white-space: pre-line;
  }
  .answer {
    margin-top: 20px;
  }
  .result {
    font-size: 22px;
    margin-top: 15px;
  }
</style>
</head>

<body>
<div class="box">
  <h1>數學隨機出題系統</h1>

  <label>選擇章節：</label><br>
  <select id="topic">
    <option value="exp">① 指數與根式</option>
    <option value="log">② 對數</option>
    <option value="func">③ 多項式與函數</option>
    <option value="ineq">④ 不等式（含絕對值）</option>
    <option value="word">⑤ 數學文字題</option>
    <option value="geo">⑥ 幾何（直線與圓）</option>
  </select>
  <br>
  <button onclick="newQuestion()">開始出題</button>

  <div class="question" id="question"></div>

  <div class="answer">
    <input id="userAnswer" placeholder="輸入答案後按 Enter">
  </div>

  <div class="result" id="result"></div>
</div>

<script>
let correctAnswer = "";

document.getElementById("userAnswer").addEventListener("keydown", e => {
  if (e.key === "Enter") check();
});

function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a;}

function newQuestion(){
  document.getElementById("result").textContent="";
  document.getElementById("userAnswer").value="";
  const t = document.getElementById("topic").value;

  if(t==="exp") expQ();
  if(t==="log") logQ();
  if(t==="func") funcQ();
  if(t==="ineq") ineqQ();
  if(t==="word") wordQ();
  if(t==="geo") geoQ();
}

function check(){
  const u = document.getElementById("userAnswer").value.trim();
  document.getElementById("result").textContent =
    (u===correctAnswer) ? "✔ 正確" : "✘ 錯誤，正確答案為：" + correctAnswer;
  setTimeout(newQuestion, 800);
}

/* ① 指數與根式 */
function expQ(){
  const a=rand(2,5), b=rand(3,6), c=rand(1,3);
  document.getElementById("question").textContent =
`化簡下列式子：
( √(${a*a*b}) ) ÷ ( ${a}√${b} )`;
  correctAnswer = "1";
}

/* ② 對數 */
function logQ(){
  const x=rand(2,4), y=rand(3,5);
  document.getElementById("question").textContent =
`已知：
log ${x*y} = log ${x} + log ${y}

請求 log ${x} + log ${y} 的值`;
  correctAnswer = "log"+x+"+log"+y;
}

/* ③ 函數比較 */
function funcQ(){
  const a=rand(-3,3), b=rand(-5,5);
  document.getElementById("question").textContent =
`已知函數：
f(x)=x²${b>=0?"+":""}${b}x${a>=0?"+":""}${a}

比較 f(4) 與 f(5) 的大小：
1️⃣ f(4) > f(5)
2️⃣ f(5) > f(4)`;
  const f4=16+4*b+a;
  const f5=25+5*b+a;
  correctAnswer = f4>f5 ? "1":"2";
}

/* ④ 不等式 */
function ineqQ(){
  const a=rand(1,4), b=rand(2,6);
  document.getElementById("question").textContent =
`解下列不等式：
| ${a}x − ${b} | ≥ ${a+b}

請寫出解集（例如：x ≥ 3 或 x ≤ -1）`;
  correctAnswer = "x≥"+((b+(a+b))/a);
}

/* ⑤ 文字題 */
function wordQ(){
  const a=rand(2,4);
  document.getElementById("question").textContent =
`某數以科學記號表示為：
${a}.5 × 10³

請問此數共有幾位數？`;
  correctAnswer = "4";
}

/* ⑥ 幾何 */
function geoQ(){
  const r=rand(3,6);
  document.getElementById("question").textContent =
`圓 C 的方程式為：
x² + y² = ${r*r}

判斷圓心到原點距離為多少`;
  correctAnswer = "0";
}
</script>
</body>
</html>
