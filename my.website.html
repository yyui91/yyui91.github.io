<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>數學出題系統</title>
<style>
body{font-family:Arial;background:#f5f7fb;padding:30px}
h1{font-size:32px}
button{font-size:20px;padding:10px 20px;margin:10px}
#question{font-size:26px;margin:20px 0}
input{font-size:22px;padding:6px;width:200px}
#result{font-size:22px;margin-top:10px}
</style>
</head>
<body>

<h1>數學隨機出題系統</h1>

<select id="topic" style="font-size:20px">
  <option value="exp">① 指數與根式</option>
  <option value="log">② 對數</option>
  <option value="func">③ 多項式與函數</option>
  <option value="ineq">④ 不等式</option>
  <option value="word">⑤ 數學文字題</option>
  <option value="geo">⑥ 幾何</option>
</select>

<button onclick="next()">開始出題</button>

<div id="question"></div>
<input id="answer" placeholder="輸入答案後按 Enter">
<div id="result"></div>

<script>
let currentAnswer = null;

function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a}

document.getElementById("answer").addEventListener("keydown",e=>{
  if(e.key==="Enter") check();
});

function next(){
  document.getElementById("result").innerText="";
  document.getElementById("answer").value="";
  const t=document.getElementById("topic").value;
  if(t==="exp") exp();
  if(t==="log") logQ();
  if(t==="func") func();
  if(t==="ineq") ineq();
  if(t==="word") word();
  if(t==="geo") geo();
}

/* ① 指數與根式 */
function exp(){
  const type=rand(1,4);
  let q,a;
  if(type===1){
    let a1=rand(2,5),a2=rand(1,4);
    q=`化簡：2<sup>${a1}</sup> × 2<sup>${a2}</sup>`;
    a=Math.pow(2,a1+a2);
  }
  if(type===2){
    let a1=rand(2,5);
    q=`化簡：√(2<sup>${a1}</sup>)`;
    a=Math.pow(2,a1/2);
  }
  if(type===3){
    let a1=rand(2,6),a2=rand(1,4);
    q=`化簡：2<sup>${a1}</sup> ÷ 2<sup>${a2}</sup>`;
    a=Math.pow(2,a1-a2);
  }
  if(type===4){
    let a1=rand(2,8);
    q=`化簡：√${a1*2}`;
    a=Math.sqrt(a1*2);
  }
  show(q,a);
}

/* ② 對數 */
function logQ(){
  const type=rand(1,3);
  let q,a;
  if(type===1){
    let x=rand(1,3);
    q=`求 x：log<sub>2</sub>(x+1)= ${x}`;
    a=Math.pow(2,x)-1;
  }
  if(type===2){
    let a1=rand(2,5);
    q=`計算：log<sub>10</sub>(${Math.pow(10,a1)})`;
    a=a1;
  }
  if(type===3){
    let x=rand(1,3);
    q=`解方程：log<sub>3</sub>(x+2)=2`;
    a=7;
  }
  show(q,a);
}

/* ③ 函數 */
function func(){
  const type=rand(1,3);
  let q,a;
  if(type===1){
    q=`比較 f(4) 與 f(5)，其中 f(x)=x²−3x（輸入 1 或 2）`;
    a=2;
  }
  if(type===2){
    let x=rand(1,4);
    q=`已知 f(x)=x²−2x，求 f(${x})`;
    a=x*x-2*x;
  }
  if(type===3){
    q=`二次函數 y=x²−4x+1 的最小值`;
    a=-3;
  }
  show(q,a);
}

/* ④ 不等式 */
function ineq(){
  const type=rand(1,2);
  let q,a;
  if(type===1){
    q=`解不等式：|x−3|≤2，求解的個數`;
    a=5;
  }
  if(type===2){
    q=`解不等式：x²−5x+6>0，解的區間個數`;
    a=2;
  }
  show(q,a);
}

/* ⑤ 文字題 */
function word(){
  const type=rand(1,2);
  let q,a;
  if(type===1){
    q=`1.2×10³ 與 3×10² 比較，前者是後者的幾倍？`;
    a=4;
  }
  if(type===2){
    q=`某數以 2 倍成長，成長 3 次後為 64，原本是多少？`;
    a=8;
  }
  show(q,a);
}

/* ⑥ 幾何 */
function geo(){
  const type=rand(1,2);
  let q,a;
  if(type===1){
    q=`圓心 (0,0)，半徑 5，點 (3,4) 與圓的關係（1內2上3外）`;
    a=2;
  }
  if(type===2){
    q=`點 (1,2) 到直線 x=4 的距離`;
    a=3;
  }
  show(q,a);
}

function show(q,a){
  document.getElementById("question").innerHTML=q;
  currentAnswer=a;
}

function check(){
  const v=document.getElementById("answer").value.trim();
  if(v==="")return;
  if(Math.abs(Number(v)-currentAnswer)<0.01){
    document.getElementById("result").innerText="✔ 正確";
    setTimeout(next,600);
  }else{
    document.getElementById("result").innerText="✘ 錯誤";
  }
}
</script>

</body>
</html>
