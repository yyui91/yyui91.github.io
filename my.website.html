<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>數學隨機出題系統</title>

<!-- MathJax -->
<script>
window.MathJax = {
  tex: { inlineMath: [['\\(','\\)']] }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
body{font-family:sans-serif;background:#eef2f7;font-size:22px}
.box{max-width:1200px;margin:30px auto;background:#fff;padding:30px;border-radius:18px}
h1{font-size:36px}
select,button,input{font-size:22px;padding:10px 14px;margin-top:10px}
.q{margin-top:25px;font-size:30px;line-height:1.8}
.result{margin-top:14px;font-weight:bold}
</style>
</head>

<body>
<div class="box">
<h1>數學隨機出題系統</h1>

<select id="chapter">
<option value="exp">① 指數與根式</option>
<option value="log">② 對數</option>
<option value="poly">③ 多項式與函數</option>
<option value="ineq">④ 不等式</option>
<option value="word">⑤ 數學文字題</option>
<option value="geo">⑥ 幾何（直線、圓）</option>
</select>

<br>
<button onclick="newQ()">開始出題</button>

<div class="q" id="q"></div>
<input id="ans" placeholder="輸入答案後按 Enter">
<div class="result" id="res"></div>
</div>

<script>
let check=null;
function r(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function eq(a,b){return Math.abs(a-b)<1e-6;}
function num(s){
  if(s.includes("/")){
    let [a,b]=s.split("/").map(Number);
    return a/b;
  }
  return Number(s);
}

/* ① 指數與根式 */
function Q_exp(){
  let a=r(2,5), b=r(3,6), c=r(1,3);
  check=u=>eq(u,Math.pow(a,b-c));
  return `化簡： \\( \\frac{${a}^{${b}}}{${a}^{${c}}} \\)`;
}

/* ② 對數 */
function Q_log(){
  let a=r(2,9), b=r(2,5);
  check=u=>eq(u,Math.log(a)/Math.log(b));
  return `計算： \\( \\log_{${b}} ${a} \\)`;
}

/* ③ 多項式與函數 */
function Q_poly(){
  let a=r(1,3), b=r(-5,5);
  check=u=>eq(u,a*4+b);
  return `若 \\( f(x)=${a}x+${b} \\)，求 \\( f(4) \\)`;
}

/* ④ 不等式 */
function Q_ineq(){
  let a=r(1,4), b=r(3,10);
  check=u=>eq(u,b/a);
  return `解 \\( |${a}x| \\ge ${b} \\)，輸入正的臨界值`;
}

/* ⑤ 文字題（指數成長） */
function Q_word(){
  let k=r(2,4), t=r(3,6);
  check=u=>eq(u,Math.pow(k,t));
  return `某數量每次變為原來的 ${k} 倍，經 ${t} 次後為多少倍？`;
}

/* ⑥ 幾何 */
function Q_geo(){
  let r1=r(2,6), d=r(r1+1,10);
  check=u=>eq(u,d-r1);
  return `圓心距為 ${d}，半徑為 ${r1}，求外離距離`;
}

function newQ(){
  res.textContent="";
  ans.value="";
  let c=chapter.value;
  if(c==="exp") q.innerHTML=Q_exp();
  if(c==="log") q.innerHTML=Q_log();
  if(c==="poly") q.innerHTML=Q_poly();
  if(c==="ineq") q.innerHTML=Q_ineq();
  if(c==="word") q.innerHTML=Q_word();
  if(c==="geo") q.innerHTML=Q_geo();
  MathJax.typeset();
  ans.focus();
}

ans.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    let u=num(ans.value.trim());
    if(isNaN(u)) return;
    res.textContent = check(u) ? "✔ 正確" : "✘ 錯誤";
    setTimeout(newQ,600);
  }
});
</script>
</body>
</html>
