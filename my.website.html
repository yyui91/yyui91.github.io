<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>數學隨機出題系統</title>
<style>
body{
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background:#f5f5f5;
  padding:20px;
}
#box{
  max-width:700px;
  margin:auto;
  background:white;
  padding:30px;
  border-radius:12px;
}
h1{font-size:28px;}
#question{font-size:26px; margin:30px 0;}
button{
  font-size:20px;
  padding:10px 20px;
  margin-top:15px;
}
input{
  font-size:22px;
  width:120px;
}
#feedback{font-size:22px; margin-top:15px;}
</style>
</head>

<body>
<div id="box">
<h1>數學隨機出題</h1>
<div id="question"></div>
<input id="answer" autocomplete="off">
<br>
<button onclick="submitAnswer()">送出</button>
<div id="feedback"></div>
</div>

<script>
let currentAnswer = null;

/* ---------- 工具 ---------- */
function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function gcd(a,b){return b===0?Math.abs(a):gcd(b,a%b);}

/* ---------- 主題 1：多項式與代數 ---------- */
function topic1(){
  let a=rand(1,5), b=rand(1,5), x=rand(1,4);
  currentAnswer = a*x+b;
  return `已知 f(x)=${a}x+${b}，求 f(${x})`;
}

/* ---------- 主題 2：函數比較 ---------- */
function topic2(){
  let a=rand(1,3), b=rand(0,4);
  let f4=a*4*4+b, f5=a*5*5+b;
  currentAnswer = f4>f5?1:2;
  return `比較 f(4) 與 f(5)，其中 f(x)=${a}x²+${b}<br>（1=f(4)較大，2=f(5)較大）`;
}

/* ---------- 主題 3：不等式（整數解個數） ---------- */
function topic3(){
  let c=rand(0,5), r=rand(1,4);
  let L=c-r, R=c+r;
  currentAnswer = R-L+1;
  return `解不等式 |x−${c}|≤${r}，求整數解個數`;
}

/* ---------- 主題 4：一次不等式 ---------- */
function topic4(){
  let a=rand(1,5), b=rand(0,10);
  let x0=Math.floor(b/a);
  currentAnswer = x0+1;
  return `解不等式 ${a}x≤${b}，求整數解個數（x≥0）`;
}

/* ---------- 主題 5：數學文字判斷 ---------- */
function topic5(){
  let type=rand(1,3);
  if(type===1){
    let a=rand(2,9), n=rand(2,4);
    currentAnswer = Math.pow(a,n);
    return `${a} 連續乘 ${n} 次，結果是多少？`;
  }
  if(type===2){
    let a=rand(2,5), t=rand(2,4);
    currentAnswer = Math.pow(a,t);
    return `某數每次變為原來的 ${a} 倍，連續 ${t} 次後是原來的幾倍？`;
  }
  let n=rand(10,50);
  currentAnswer = String(Math.pow(2,n)).length;
  return `2 的 ${n} 次方是幾位數？`;
}

/* ---------- 主題 6：幾何判斷 ---------- */
function topic6(){
  let x1=rand(-3,3), y1=rand(-3,3);
  let x2=rand(-3,3), y2=rand(-3,3);
  let d=(x1-x2)**2+(y1-y2)**2;
  let r1=rand(1,5), r2=rand(1,5);
  let sum=(r1+r2)**2;
  currentAnswer = d<sum?1:2;
  return `圓心 A(${x1},${y1}) 半徑 ${r1}<br>
          圓心 B(${x2},${y2}) 半徑 ${r2}<br>
          兩圓是否相交？（1=是，2=否）`;
}

/* ---------- 出題 ---------- */
function newQuestion(){
  document.getElementById("answer").value="";
  document.getElementById("feedback").innerText="";
  let topics=[topic1,topic2,topic3,topic4,topic5,topic6];
  let q=topics[rand(0,topics.length-1)]();
  document.getElementById("question").innerHTML=q;
}

function submitAnswer(){
  let v=document.getElementById("answer").value.trim();
  if(v==="") return;
  if(Number(v)===currentAnswer){
    document.getElementById("feedback").innerText="✔ 正確";
  }else{
    document.getElementById("feedback").innerText="✘ 錯誤，正確答案是 "+currentAnswer;
  }
  setTimeout(newQuestion,800);
}

newQuestion();
</script>
</body>
</html>
