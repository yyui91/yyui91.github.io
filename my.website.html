<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>數學隨機出題系統</title>

<!-- MathJax：LaTeX 顯示（你要的格式） -->
<script>
window.MathJax = {
  tex: { inlineMath: [['\\(','\\)'], ['$', '$']] }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
body{font-family:sans-serif;background:#eef2f7;font-size:22px}
.box{max-width:1100px;margin:30px auto;background:#fff;padding:30px;border-radius:16px}
h1{font-size:34px}
select,button,input{font-size:22px;padding:10px 14px;margin-top:10px}
.q{margin-top:25px;font-size:28px;line-height:1.8}
.result{margin-top:12px;font-weight:bold}
</style>
</head>
<body>

<div class="box">
<h1>數學隨機出題系統</h1>

<select id="chapter">
<option value="exp">① 指數與根式</option>
<option value="log">② 對數</option>
<option value="ineq">③ 不等式</option>
</select>
<br>
<button onclick="newQ()">開始出題</button>

<div class="q" id="q"></div>
<input id="ans" placeholder="輸入答案後按 Enter">
<div class="result" id="res"></div>
</div>

<script>
let checkFn=null;
function r(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function eq(a,b){return Math.abs(a-b)<1e-6;}
function parseNum(s){
  if(s.includes("/")){
    let [a,b]=s.split("/").map(Number);
    if(!isNaN(a)&&!isNaN(b)) return a/b;
  }
  return Number(s);
}

/* ① 指數與根式 */
function expQ(){
  let a=r(2,5), b=r(2,4), c=r(1,3);
  let val=Math.pow(a,b-c);
  checkFn=u=>eq(u,val);
  return `化簡並求值： \\( \\frac{${a}^{${b}}}{${a}^{${c}}} \\)`;
}

/* ② 對數 */
function logQ(){
  let a=r(2,5), b=r(2,5);
  let val=Math.log(a)/Math.log(b);
  checkFn=u=>eq(u,val);
  return `計算： \\( \\log_{${b}} ${a} \\)`;
}

/* ③ 不等式 */
function ineqQ(){
  let a=r(1,4), b=r(3,9);
  let v=b/a;
  checkFn=u=>eq(u,v);
  return `解不等式： \\( |${a}x-7| \\ge ${b} \\)，請輸入正的臨界值`;
}

function newQ(){
  res.textContent="";
  ans.value="";
  let c=chapter.value;
  if(c==="exp") q.innerHTML=expQ();
  if(c==="log") q.innerHTML=logQ();
  if(c==="ineq") q.innerHTML=ineqQ();
  MathJax.typeset();
  ans.focus();
}

ans.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    let u=parseNum(ans.value.trim());
    if(isNaN(u)) return;
    res.textContent = checkFn(u) ? "✔ 正確" : "✘ 錯誤";
    setTimeout(newQ,700);
  }
});
</script>

</body>
</html>
