import { useState } from "react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

// 指數與根式已【完全刪除】

export default function MathQuizApp() {
  const topics = [
    "① 對數（進階）",
    "② 多項式與函數",
    "③ 不等式（含絕對值）",
    "④ 函數比較與代入",
    "⑤ 數學文字題（B 階段新版）",
    "⑥ 幾何（直線、圓）"
  ];

  const randomInt = (a, b) => Math.floor(Math.random() * (b - a + 1)) + a;

  const genLog = () => {
    const a = randomInt(2, 5);
    const b = randomInt(2, 5);
    return `已知 log_${a} ${a ** b}，求值。`;
  };

  const genPoly = () => {
    const x = randomInt(-3, 3);
    return `已知 f(x)=x²−3x+2，求 f(${x})。`;
  };

  const genIneq = () => {
    const a = randomInt(1, 5);
    return `解不等式：|x−${a}|≤${randomInt(1, 4)}，求解集。`;
  };

  const genCompare = () => {
    return `比較 f(4) 與 f(5)，其中 f(x)=x²−3x（輸入 1 或 2）。`;
  };

  const genWord = () => {
    return `某數增加 20% 後為 120，求原數。`;
  };

  const genGeo = () => {
    const r = randomInt(3, 8);
    return `圓心在原點、半徑為 ${r} 的圓，求圓的方程式。`;
  };

  const generators = [
    genLog,
    genPoly,
    genIneq,
    genCompare,
    genWord,
    genGeo
  ];

  const [topic, setTopic] = useState("");
  const [question, setQuestion] = useState("");

  const startQuiz = () => {
    const i = randomInt(0, topics.length - 1);
    setTopic(topics[i]);
    setQuestion(generators[i]());
  };

  return (
    <div className="w-full min-h-screen flex justify-center items-start p-6 bg-gray-100">
      <Card className="w-full max-w-2xl p-6 rounded-2xl shadow-lg">
        <CardContent>
          <h1 className="text-3xl font-bold mb-4">數學出題器（最終版）</h1>

          <Button className="text-lg px-6 py-4 rounded-2xl" onClick={startQuiz}>
            開始出題
          </Button>

          {topic && (
            <div className="mt-6 text-xl">
              <p className="font-semibold">主題：</p>
              <p className="mb-4">{topic}</p>
              <p className="font-semibold">題目：</p>
              <p>{question}</p>
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
}
