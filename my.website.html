<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>數學出題器</title>
<style>
body{
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background:#f5f7fb;
  padding:40px;
}
.card{
  max-width:900px;
  margin:auto;
  background:white;
  border-radius:16px;
  padding:30px;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
}
h1{font-size:32px;margin-bottom:20px}
select,button,input{
  font-size:22px;
  padding:10px 14px;
  border-radius:10px;
  border:1px solid #ccc;
}
button{
  background:#2563eb;
  color:white;
  border:none;
  cursor:pointer;
}
.problem{
  margin-top:30px;
  font-size:26px;
}
input{
  width:300px;
  margin-top:20px;
}
.result{
  font-size:22px;
  margin-top:10px;
}
.good{color:green}
.bad{color:red}
</style>
</head>
<body>

<div class="card">
<h1>數學隨機出題系統</h1>

<select id="topic">
<option value="exp">① 指數與根式</option>
<option value="log">② 對數</option>
<option value="poly">③ 多項式與函數</option>
<option value="ineq">④ 不等式</option>
<option value="word">⑤ 數學文字題</option>
<option value="geo">⑥ 幾何（直線、圓）</option>
</select>

<button onclick="next()">開始 / 下一題</button>

<div class="problem" id="q"></div>

<input id="ans" placeholder="輸入答案後按 Enter">

<div class="result" id="res"></div>
</div>

<script>
const qEl = document.getElementById("q");
const aEl = document.getElementById("ans");
const rEl = document.getElementById("res");

let currentCheck = ()=>false;

const r=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;

aEl.addEventListener("keydown",e=>{
  if(e.key==="Enter") check();
});

function check(){
  if(currentCheck(aEl.value)){
    rEl.textContent="✔ 正確";
    rEl.className="result good";
    setTimeout(next,700);
  }else{
    rEl.textContent="✘ 錯誤";
    rEl.className="result bad";
  }
}

function next(){
  aEl.value="";
  rEl.textContent="";
  const t=document.getElementById("topic").value;
  if(t==="exp") expQ();
  if(t==="log") logQ();
  if(t==="poly") polyQ();
  if(t==="ineq") ineqQ();
  if(t==="word") wordQ();
  if(t==="geo") geoQ();
}

/* ① 指數與根式（多題型混合） */
function expQ(){
  const type=r(1,5);
  if(type===1){
    let a=r(2,5),m=r(2,6),n=r(1,5);
    qEl.textContent=`化簡： (${a}^${m}) ÷ (${a}^${n})`;
    currentCheck=u=>Number(u)==Math.pow(a,m-n);
  }
  if(type===2){
    let a=r(2,4),n=r(2,5);
    qEl.textContent=`化簡： √(${a}^${2*n})`;
    currentCheck=u=>Number(u)==Math.pow(a,n);
  }
  if(type===3){
    let a=r(2,5);
    qEl.textContent=`化簡： ${a}^(-2) × ${a}^3`;
    currentCheck=u=>Number(u)==a;
  }
  if(type===4){
    let a=r(2,6);
    qEl.textContent=`化簡： √(${a} + √${a})`;
    currentCheck=u=>true; // 理論題，老師不給數值答案
  }
  if(type===5){
    let x=r(1,4);
    qEl.textContent=`解方程： 2^(x+1)=8，x=?`;
    currentCheck=u=>Number(u)==2;
  }
}

/* ② 對數 */
function logQ(){
  let a=r(2,5);
  qEl.textContent=`計算： log_${a}(${a*a})`;
  currentCheck=u=>Number(u)==2;
}

/* ③ 多項式與函數 */
function polyQ(){
  let r1=r(-3,3)||1,r2=r(-3,3)||2;
  qEl.textContent=`已知 f(x)=(x-${r1})(x-${r2})，求零點`;
  currentCheck=u=>u.includes(r1)&&u.includes(r2);
}

/* ④ 不等式 */
function ineqQ(){
  let a=r(1,4);
  qEl.textContent=`解不等式： |x-${a}| ≥ 3`;
  currentCheck=u=>true;
}

/* ⑤ 文字題 */
function wordQ(){
  let a=r(2,5),n=r(3,6);
  qEl.textContent=`某數為 ${a}×10^${n}，共有幾位數？`;
  currentCheck=u=>Number(u)==n+1;
}

/* ⑥ 幾何 */
function geoQ(){
  let r1=r(3,6),d=r(1,12);
  qEl.textContent=`圓心距為 ${d}，半徑 ${r1}、${r1}，判斷相交狀況`;
  currentCheck=u=>true;
}
</script>

</body>
</html>
